<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
	<ul id="list"></ul>
	<script src="jquery.min.js"></script>
	<script src="hmac-sha1.js"></script>
	<script src="enc-base64.js"></script>
	<script src="backbeam.js"></script>
	<script charset="UTF-8">
		backbeam.configure({
			project:'callezeta',
			env:'dev',
			shared: '5bd82df918d542f181f9308008f229c335812ba4',
			secret: 'c7b7726df5a0e96304cd6e1d44e86036038191826b52bc11dff6e2a626ea1c46b0344dcc069a14dd',
			realtime:true,
			host:'backbeamapps.dev',
			port:8079
		}, function(err) {
			backbeam.subscribeToEvents('foo', function(event, data) {
				console.log('yay!', event, data)
			})
			// backbeam.subscribeToEvents('bar')

			setTimeout(function() {
				backbeam.sendEvent('foo', {say:'hello from javascript!'})
			}, 100)
		})
		backbeam.select('event').query('join last 5 images').fetch(1, 0, function(error, objects) {
			console.log('error', error)
			for (var i=0; i<objects.length; i++) {
				console.log('id', objects[0].id())
				var images = objects[i].get('images')
				if (images && images.result.length > 0) {
					console.log('images', images.result[0].get('filename'))
				}
			}
		})

		// var pais = backbeam.empty('pais')
		// pais.set('nombre', 'Espa√±a')
		// pais.save(function(err) {
		// 	console.log('saved', pais.id())
		// })

		// var e = client.empty('event')
		// e.set('name', 'A new event')
		// e.insert(function(err, foo) {
		// 	e.set('name', 'An updated event')
		// 	e.update(function(err, foo) {
		// 		e.remove(function(err, foo) {
		// 			console.log('inserted, updated and finally... deleted')
		// 		})
		// 	})
		// })
	</script>
</body>
