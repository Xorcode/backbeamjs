<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
</head>
<body>
	<ul id="list"></ul>
	<script src="jquery.min.js"></script>
	<script src="hmac-sha1.js"></script>
	<script src="backbeam.js"></script>
	<script>
		backbeam.configure({ project:'callezeta', env:'dev', realtime:true, host:'backbeam.dev', port:8080 }, function(err) {
			// backbeam.setEventHandler(function(data) {
			// 	console.log('received', data)
			// })

			// backbeam.subscribeToEvents('foo')

			// backbeam.sendEvent('foo', {say:'hello world!'})
			// console.log('message sent')
		})
		backbeam.select('event').query('join last 5 images').fetch(1, 0, function(error, objects) {
			console.log('error', error)
			for (var i=0; i<objects.length; i++) {
				console.log('id', objects[0].id())
				var images = objects[i].get('images')
				if (images && images.result.length > 0) {
					console.log('images', images.result[0].get('filename'))
				}
			}
		})

		// var pais = backbeam.empty('pais')
		// pais.set('nombre', 'Espa√±a')
		// pais.save(function(err) {
		// 	console.log('saved', pais.id())
		// })

		// var hash = CryptoJS.HmacSHA1("Message", "Secret Passphrase");
		// console.log('hash', hash.toString(CryptoJS.enc.Hex))

		// var e = client.empty('event')
		// e.set('name', 'A new event')
		// e.insert(function(err, foo) {
		// 	e.set('name', 'An updated event')
		// 	e.update(function(err, foo) {
		// 		e.remove(function(err, foo) {
		// 			console.log('inserted, updated and finally... deleted')
		// 		})
		// 	})
		// })
	</script>
</body>
