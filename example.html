<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
</head>
<body>
	<ul id="list"></ul>
	<script src="jquery.min.js"></script>
	<script src="backbeam.js"></script>
	<script>
		var client = backbeam.createClient({ project:'callezeta', host:'backbeam.dev', port:'8080' })
		client.select('event').query('join last 1 images').fetch(100, 0, function(error, objects) {
			$.each(objects, function(i, obj) {
				var li = $('<li></li>').text(obj.get('name'))
				$('#list').append(li)
				var images = obj.get('images').result
				if (images && images.length > 0) {
					var first = images[0]
					var url = client.fileURL(first.id, {width:44, height:44})
					li.prepend($('<img>').attr('src', url))
				}
			})
		})

		// var e = client.empty('event')
		// e.set('name', 'A new event')
		// e.insert(function(err, foo) {
		// 	e.set('name', 'An updated event')
		// 	e.update(function(err, foo) {
		// 		e.remove(function(err, foo) {
		// 			console.log('inserted, updated and finally... deleted')
		// 		})
		// 	})
		// })
	</script>
</body>
